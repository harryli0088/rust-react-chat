(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),o=n.n(c),s=n(7),a=n.n(s),i=(n(14),n(8)),d=n(2),l=n(3),h=n(5),u=n(4),j=(n(15),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(d.a)(this,n);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).showSenderAddr=function(){if(e.props.showSenderAddr){var t="self"===e.props.senderAddr?"You":e.props.senderAddr;return Object(r.jsx)("div",{className:"sender",children:t})}},e}return Object(l.a)(n,[{key:"render",value:function(){return this.props.content?Object(r.jsx)("div",{className:"message-container",children:Object(r.jsx)("div",{className:"message ".concat(this.props.senderAddr," ").concat(this.props.type),children:Object(r.jsxs)("div",{children:[this.showSenderAddr(),Object(r.jsx)("span",{className:"content",children:"string"===typeof this.props.content?Object(r.jsx)("pre",{children:this.props.content}):this.props.content})]})})}):null}}]),n}(o.a.Component)),p=n.p+"static/media/github.7ef381bc.svg",b=(n(16),function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var c;return Object(d.a)(this,n),(c=t.call(this,e)).lastDate=new Date,c.lastSenderAddr="",c.lastType="",c.socket=void 0,c.setUpSocket=function(){console.log("I RUN");var e=new WebSocket("wss://guarded-wave-42520.herokuapp.com",window.location.pathname.replace(/\//gi,"-"));return e.onopen=function(){console.log("OPEN RUNS"),c.addChat(Object(r.jsxs)("span",{children:["You have joined the chat room ",Object(r.jsx)("span",{className:"blob",children:window.location.pathname})]}),"self","meta"),c.setState({socketReadyState:e.readyState})},e.onmessage=function(e){console.log("MESSAGE",e);try{var t=JSON.parse(e.data);c.addChatFromSocket(t.message,t.sender_addr,t.type_key)}catch(n){console.error(n)}},e.onclose=function(){console.log("CLOSE"),c.setState({socketReadyState:e.readyState})},e},c.addChatFromSocket=function(e,t,n){c.addChat(e,t,n),c.setState({socketReadyState:c.socket.readyState})},c.addChat=function(e,t,n){var r=new Date,o={content:e,date:r,senderAddr:t,showSenderAddr:c.lastSenderAddr!==t||c.lastType!==n,type:n};c.lastDate=r,c.lastSenderAddr=o.senderAddr,c.lastType=o.type,c.setState({chats:c.state.chats.concat(o)})},c.getConnectionStatus=function(){switch(c.state.socketReadyState){case 0:return"Connecting";case 1:return"Connected";case 2:return"Closing";default:return"Closed"}},c.onChatTypeSubmit=function(e){e.preventDefault();var t=c.state.input.trim();t&&(c.socket.send(t),c.addChat(t,"self","user"),c.setState({input:""}))},c.onNewRoomSubmit=function(e){e.preventDefault();var t=encodeURIComponent(c.state.newRoom);window.location.href="".concat(window.location.origin,"/").concat(t)},c.state={input:"",chats:[],newRoom:"",socketReadyState:-1},c.socket=c.setUpSocket(),c}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){var e=this,t=this.getConnectionStatus();return Object(r.jsxs)("div",{id:"App",children:[Object(r.jsxs)("div",{id:"content",children:[Object(r.jsxs)("div",{id:"header",className:"container",children:["Current Room: ",Object(r.jsx)("span",{className:"blob",children:window.location.pathname})," ",Object(r.jsx)("span",{className:"blob  ".concat(t),children:t})]}),Object(r.jsx)("div",{id:"chat-container",className:"container",children:this.state.chats.map((function(e,t){return Object(r.jsx)(j,Object(i.a)({},e),t)}))}),Object(r.jsx)("div",{id:"chat-form-container",children:Object(r.jsxs)("form",{id:"chat-form",onSubmit:this.onChatTypeSubmit,children:[Object(r.jsx)("input",{autoFocus:!0,onChange:function(t){return e.setState({input:t.target.value})},value:this.state.input}),Object(r.jsx)("button",{type:"submit",disabled:1!==this.state.socketReadyState,children:"Send"})]})})]}),Object(r.jsxs)("div",{id:"sidebar",children:[Object(r.jsx)("a",{id:"github",href:"https://github.com/harryli0088/rust-react-chat",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)("img",{src:p,alt:"github repo"})}),Object(r.jsx)("h2",{children:"React - Rust Chat App"}),Object(r.jsx)("div",{children:"I created this chat room prototype to learn how to use Rust. The Rust server features include:"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"WebSocket server"}),Object(r.jsx)("li",{children:"Chat rooms distinguished by route (via WebSocket protocol)"}),Object(r.jsx)("li",{children:"Alerts when a client connects or disconnects"})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("form",{id:"new-room-form",onSubmit:this.onNewRoomSubmit,children:[Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"new-room-input",children:"Change Rooms:"}),Object(r.jsxs)("div",{children:[Object(r.jsx)("input",{id:"new-room-input",onChange:function(t){return e.setState({newRoom:t.target.value})},placeholder:"Enter a new room code",value:this.state.newRoom}),"\xa0",Object(r.jsx)("button",{type:"submit",children:"Change"})]}),Object(r.jsx)("br",{})]}),Object(r.jsx)("hr",{}),Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["Built using ",Object(r.jsx)("a",{href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",children:"React"}),", ",Object(r.jsx)("a",{href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer",children:"Typescript"}),", ",Object(r.jsx)("a",{href:"https://fontawesome.com/license",target:"_blank",rel:"noopener noreferrer",children:"Font Awesome"}),", and ",Object(r.jsx)("a",{href:"https://www.rust-lang.org/",target:"_blank",rel:"noopener noreferrer",children:"Rust"})]}),Object(r.jsx)("p",{children:Object(r.jsx)("a",{href:"https://github.com/harryli0088/rust-react-chat",target:"_blank",rel:"noopener noreferrer",children:"Github Repo"})})]})]})]})}}]),n}(o.a.Component)),m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),o(e),s(e)}))};a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(b,{})}),document.getElementById("root")),m()}},[[17,1,2]]]);
//# sourceMappingURL=main.139b3f28.chunk.js.map